# .github/workflows/ci-cd.yml
name: ğŸš€ CI/CD Pipeline

# When should this run?
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    # Step 1: Get the code
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v3
    
    # Step 2: Setup Node.js for running tests
    - name: ğŸ”§ Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
    
    # Step 3: Run tests
    - name: ğŸ§ª Run tests
      run: |
        echo "ğŸ§ª Running tests..."
        node test.js
        echo "âœ… All tests passed!"
    
    # Step 4: Build (simulate)
    - name: ğŸ”¨ Build application
      run: |
        echo "ğŸ”¨ Building application..."
        echo "ğŸ“¦ Creating build artifacts..."
        mkdir -p build
        cp index.html build/
        echo "âœ… Build complete!"
    
    # Step 5: Deploy to GitHub Pages (FREE hosting!)
    - name: ğŸš€ Deploy to GitHub Pages
      if: github.ref == 'refs/heads/main'
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./build
        
    # Step 6: Success message
    - name: ğŸ‰ Success
      run: |
        echo "ğŸ‰ Pipeline completed successfully!"
        echo "ğŸŒ Your app is live at: https://${{ github.repository_owner }}.github.io/my-cicd-app"